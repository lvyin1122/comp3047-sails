<div class="columns card mt-2">
  <div class="column is-three-fifths">
    <div class="image">
      <figure class="image is-4by3">
          <img src="<%= coupon.image %>" alt="Placeholder image" />
      </figure>
    </div>
  </div>
  <div class="column">
    <div class="content px-4 py-4">
        <p class="title">
        <%= coupon.restaurant %>
        </p>
        <p class="is-size-5"><%= coupon.title %></p>
        <ul>
          <li>
            <b>Coins:</b> <%= coupon.coins %>
          </li>
          <li>
            <b>Address:</b> <%= coupon.mall %>, <%= coupon.region %>
          </li>
          <li>
            <b>Expiry Date:</b> <%= coupon.exdate %>
          </li>
          <li>
            <%= coupon.detail %>
          </li>
        </ul>
        <button type="button" class="button is-primary" onclick="redeemCoupon('<%= coupon.id %>')">Redeem</button>
    </div>
  </div>
</div>

<script>
  async function redeemCoupon(id) {
      var r = confirm("Confirm Delete?");
      
      if (r) {
          var response = await fetch("/person/delete/" + id, {
              method: "POST"
          });

          if (response.ok) {
              var html = await response.text();
              alert(html);
          } else {
              alert(response.status + ": " + response.statusText);
          }

      } else {
          alert("cancelled");
      }
  };
</script>
